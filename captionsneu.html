<!DOCTYPE html>
<html lang="en" dir="ltr">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta content="text/html;charset=utf-8" http-equiv="Content-Type" />
    <meta content="utf-8" http-equiv="encoding" />
    <meta name="description" content="This is a free-to-use captioning tool via speech-to-text API." />
    <meta name="author" content="Steve Seguin & pxi.gmbh" />

    <title>captions üé§</title>

    <script src="captionsneu.js"></script>
    <link rel="stylesheet" href="styles/global.css">
    <link rel="stylesheet" href="styles/captionsneu.css">
  </head>
  <body onload="captions.init()">
    <div>
      <h1>what the font</h1>
      <button id="caption-startstop" class="button--secondary" onclick="captions.toggleCaption()">
        <span id="caption-start-text" lang="en">start captioning</span>
        <span id="caption-stop-text" class="hidden" lang="en">stop captioning</span>
      </button>
      <button class="button--secondary" onclick="captions.showLanguageDialog()">
        <span id="caption-language-select" lang="en">
          select language (currently: <span id="caption-language-value"></span>)
        </span>
      </button>
      <button id="captions-startws" class="button--secondary" onclick="captions.startActiveWebsocket()">
        <span lang="en">start external mirror</span>
      </button>
      <button id="captions-stopws" class="button--secondary hidden" onclick="captions.stopWebsocket()">
        <span lang="en">stop external mirror</span>
      </button>
      <button id="pipifytoggle"class="button--secondary" onclick="captions.pipify.toggle()">
        <span lang="en">float</span>
        <!-- use canvas + PiP to keep only the last two lines visible in floating window -->
      </button>
      <button class="button--secondary" onclick="" disabled>
        <span lang="en">copy to clipboard</span>
      </button>
      <button id="debugbutton" class="button--secondary" onclick="document.body.classList.toggle('show-debug')">
        <span lang="en">show debug</span>
      </button>
    </div>

    <!--<h2>Debug: bitte folgendes mir kopieren</h2>-->
    <div id="debug-div">

    </div>
  <section id="pipsection">
    <h2>pip-configuration <button class="closebutton" type="button" name="button" onclick="captions.pipify.toggle()">x</button> </h2>
    <ul>
      <li>
        <label for="pip-width">Width:</label>
        <select id="pip-width" class="" name="" onchange="captions.pipify.changeWidth(this.value)">
          <option value="200">small</option>
          <option value="400" selected>medium</option>
          <option value="700">large</option>
          <option value="1000">x-large</option>
          <option value="1400">xx-large</option>
        </select>
      </li>
      <li>
        <label for="pip-fontsize">Font size:</label>
        <select id="pip-fontsize" class="" name="" onchange="captions.pipify.changeFontsize(this.value)">
          <option value="10">small</option>
          <option value="30" selected>medium</option>
          <option value="50">large</option>
          <option value="70">x-large</option>
        </select>
      </li>
      <li>
        <button id="startpipbutton" class="button--secondary" type="button" name="button" onclick="captions.pipify.activatePip()">Start Picture in Picture</button>
      </li>
    </ul>
    <h3>preview:</h3>
    <canvas id="pipcanvas" width="400" height="50"></canvas>
    <video id="outputvideo" autoplay>
  </section>
  </video>
  <div id="interm" class="output">
  <p>This is a free-to-use captioning tool for use in Google Chrome.
    It uses a proprietary Google API to generate captions from your voice input.
    The output of this app is mirrored here:
    <a id="shareLink" href="overlay.html" target='_blank'>click on start external mirror to get a link</a>.
  </p>
  <p>allow browser access to mic. just start speaking out loud.
    select mic from drop down. use virtual audio cable to route desktop audio
    to your mic and caption everything said on screen.</p>
  </div>
  <h3>interim output</h3>
  <div id="outputwrapper">
    <span id="output" class="output"></span>
  </div>
  <div id="interim"></div>
  <h3>final output</h3>
  <div id="output2" class="output"></div>
  <div id="final"></div>
  <footer>
    <div class="intro">
      <p lang="en">a floating webcam image for screen recordings.</p>
    </div>
    <section id="about" class="is-modal">
      <button class="button--secondary" onclick="toggleAbout();">
        <span lang="en">close</span>
      </button>
      <div lang="en">
        <h3>how to use</h3>
        <p><strong>pipfy.captions</strong> allows you to put your mic input as automatic captioning in a floating window on your desktop. it's an accessibility accommodation for use in web conferencing, when you share your screen. if you use a virtual audio cable, you can also use it as a personal accessibility service and auto-caption everything on your desktop.</p>
        <p>thanks. practice solidarity, stay positive. you got this.</p>
        <p>made with care and too little time from your friendly design lab at <a src="https://agentur.pxi.gmbh"><strong>pxi</strong>|lab<a> (currently in german only).</p>
          <p>Much love and gratitude for original Code and websocket Server by Steve Seguin</p>
          <p>found an issue? we may have to scale up server space. contact us!</p>
      </div>
    </section>
    <button class="button--secondary" onclick="toggleAbout();">
      <span lang="en">how to use</span>
    </button>
    <div id="imprint">
      <p lang="en">free. <a href="https://github.com/pxi-gmbh/pipfy">open source</a>. by <a href="https://agentur.pxi.gmbh/"><strong>pxi</strong>‚ùòagentur</a> (imprint).</p>
      <p lang="en">experimental: <a href="./audiobridge.html">route your mic to the browser.</a>
      <br>related: <a href="https://slidenotes.io">put presentations in your browser</a>.</p>
    </div>
  </footer>
  <div id="dialog--language" class="dialog-wrapper hidden">
    <div class="dialog-inner-wrapper">
      <h2>
        Select Language
        <button class="closebutton" type="button" name="button" onclick="document.getElementById('dialog--language').classList.add('hidden');">X</button>
      </h2>
      <div class="textfield-wrapper">
        <input id="language-selection-field" type="text" name="" value="" onkeyup="captions.showLanguageRecomendation(this.value)">
        <div id="language-recomendation">

        </div>
      </div>
    </div>
  </div>
  </body>
  <script type="text/javascript" src="help.js"></script>
  <script type="text/javascript" src="captionsneu.js"></script>
  </html>
